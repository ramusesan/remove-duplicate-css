<html>

<head>
    <style id="the-style">  

       h1{
           color: red;
       }
       h1{
           color: green;
       }
       h2{
           color: blue;
       }
    </style>

</head>

<body>
    <h1 id="rule1">test </h1>
    <h2 id="rule2">  test </h2>
    <h3 id="rule3"> test3 </h3>
    <script>
        var styleTag = document.getElementById("the-style");
        var sheet = styleTag.sheet ? styleTag.sheet : styleTag.styleSheet;

        console.log("sheet", sheet.cssRules)
        var uniq = {}

     
        if (sheet.cssRules) { // all browsers, except IE before version 9
            for (var css of sheet.cssRules) {
                console.log(css)
                if (uniq[css.selectorText] === undefined)
                    uniq[css.selectorText] = css;
                // else
                    // sheet.deleteRule(css);
            }

        }
        /* else
        {  // Internet Explorer before version 9
            for (var i=0; i<sheet.rules.length; i++) {
                if (sheet.rules[i].selectorText === '#rule2') {
                // console.log(sheet.cssRules[i]);
                    sheet.removeRule (i);
                }
            }
        } */


        console.log("mystyle", mystyle)
        var uniqcss = []
        Object.entries(uniq).forEach((ele, key) => {
            uniqcss.push(ele[1].cssText);
        })

        console.log("uniqcss", uniqcss);
      

    </script>
</body>

</html>